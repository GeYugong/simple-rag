Simple-RAG 常见问题（FAQ）

Q1：为什么我问的问题明明在文档里，但检索不到？
A：
1) 文档切分导致：关键句被切到两段里，单段语义不完整。
2) 文档里用的是同义词，你提问用的是另一个说法，向量不一定能对齐。
3) top_k 太小：相关段落排在第 5 或第 6，你只取了前 4。
4) embedding 模型不适合：英文模型对中文效果一般，可换中文或多语模型。
5) 文档没入库：你忘了重新运行 ingest。

Q2：为什么检索结果看起来相关，但答案还是不对？
A：
- RAG 的 G（生成）部分需要明确约束：要求“只根据给定资料回答”，无法回答就说不知道。
- 如果上下文里有冲突内容，模型可能挑错；需要 rerank 或规则优先级。

Q3：RAG 一定能防止胡说吗？
A：
不能。RAG 只是降低概率：
- 检索错了 → 上下文错 → 模型会“认真地胡说”
- 检索对了但上下文太长/杂 → 模型可能忽略关键句
所以要做：评估、去噪、重排、提示词约束、引用证据。

Q4：chunk_size 设多少合适？
A：
- 先用 500 字符 + overlap 80
- 如果你的文档结构明显（标题/段落），可以按段落切更好
- 技术文档常用按“标题 + 段落”作为 chunk 单位

Q5：向量检索和关键词检索哪个更好？
A：
- 关键词（BM25）擅长精确匹配，如错误码、接口名、版本号。
- 向量擅长语义相似，如“怎么排查连接失败”等表达差异。
- 实战通常混合：BM25 + 向量，然后 rerank。